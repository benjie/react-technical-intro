<!DOCTYPE html>
<html>
  <head>
    <title>React 101 | BOTS.sh</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">

      /* ----- Fonts ----- */

      @font-face {
        font-family: Karla;
        src: url('fonts/Karla/Karla-Regular.ttf')
      }

      /* ----- Remark overrides ----- */

      .remark-slide-scaler {
        -moz-box-shadow: none;
        -webkit-box-shadow: none;
        box-shadow: none;
      }

      .remark-container,
      .remark-notes-area {
        background: black;
      }

      .remark-slide-content {
        padding: 1em 3em;
      }

      .remark-slide-content h1 {
        font-size: 3.5em;
        line-height: 110%
      }

      .remark-slide-content h2 {
        font-size: 2.5em
      }

      .remark-slide-content.full-code {
        padding: 0
      }
      .full-code pre {
        margin: 0
      }
      .remark-slide>.center pre {
        text-align: left;
      }

      /* ----- BOTS styles ----- */

      .title-page .react-logo {
        width: 250px;
      }
      h1#react-101 {
        margin-top: 40px;
      }

      .title-page .bots-logo-container {
        position: absolute;
        right: 0;
        bottom: 0;
        width: 400px;
        height: 96px;
        padding: 0 50px 50px 0;
      }

      .title-page .bots-logo {
        width: 100%;
      }

      body {
        font-family: Futura, 'Trebuchet MS', Arial, sans-serif;
      }
      h1, h2, h3, p {
        font-weight: normal;
        color: #60545C;
      }

      p, h3 {
        font-size: 1.8em;
      }


      a {
        color: #16BECC
      }

      strong {
        color: #16BECC
      }

      iframe {
        width: 100%;
        height: 100%;
        border: 2px solid #EBEAEA;
      }


      .aside {
        font-size: 1em;
        color: #ADA7AB

      }

      /* ----- Template styles ----- */

      .brown {
        background: #6F646C
      }
      .brown h1,
      .brown h2,
      .brown p,
      .brown .remark-inline-code {
        color: white
      }

      .blue {
        background: #1177D5;
      }
      .blue h1, .blue h2, .blue h3 {
        color: white
      }
      .blue p {
        color: #a4f0FF;
      }

      .blue a {
        color: white;
      }

      .cover {
        -webkit-background-size: cover !important;
        -moz-background-size: cover !important;
        background-size: cover !important;
        background-position-x: center !important;
        background-position-y: center !important;
        background-repeat: no-repeat !important
      }

      .contain {
        -webkit-background-size: contain !important;
        -moz-background-size: contain !important;
        background-size: contain !important;
        background-position-x: center !important;
        background-position-y: center !important;
        background-repeat: no-repeat !important
      }

      .backbone-image {
        background-image: url('images/backbone.jpg');
        position: absolute;
        top: 0px;
        right: 0px;
        bottom: 0px;
        width: 280px;
      }

      .title-page p {
        font-size: 1.4em;
      }

      .bots-is {
        background-image: url('images/bots-bg.png');
      }

      .bots-is h2, .bots-is h3 {
        color: black;
        text-shadow: 1px 1px 2px white;
      }

      .spaghetti {
        background-image: url('images/spaghetti.jpg')
      }

      .spaghetti h2 {
        color: white
      }

      .nightmare {
        background-image: url('images/nightmare.gif')
      }

      .nightmare h2 {
        color: white
      }

      .rebuild {
        background-image: url('images/demolition.gif')
      }

      .rebuild h1 {
        color: white
      }


      .happy-happy-joy-joy {
        background-image: url('images/happy.jpg')
      }

      /* ----- Code ----- */

      .has-code {
        background: #101010;
        padding: 0 2em
      }

      .has-code h1, .has-code h2, .has-code h3, .has-code p {
        color: #EBEAEA
      }

      .has-code .remark-inline-code {
        color: #A4D0DE
      }

      .remark-code, .remark-inline-code {
        font-family: Monaco, "Lucida Console", monospace;
        font-size: 0.8em;
      }
      .remark-inline-code {
        color: #2B497F
      }
      .remark-code-line-highlighted,
      .remark-code-span-highlighted {
        background-color: #333;
      }

      .zoom-code .remark-code {
        font-size: 1.1em;
      }

      .pull-left {
        float: left;
        width: 47%;
      }

      .pull-right {
        float: right;
        width: 47%;
      }

      .comment, .hljs-title {
        color: #969896;
      }

      .hljs-variable, .hljs-attribute, .hljs-tag, .hljs-regexp, .hljs-ruby .constant, .hljs-xml .tag .title, .hljs-xml .pi,
      .hljs-xml .doctype, .hljs-html .doctype, .hljs-css .id, .hljs-css .class, .hljs-css .pseudo {
        color: #cc6666;
      }

      .hljs-number, .hljs-preprocessor, .hljs-built_in, .hljs-literal, .hljs-params, .hljs-constant {
        color: #de935f;
      }


      .hljs-class, .hljs-ruby .class .title, .hljs-css .rules .attribute {
        color: #f0c674;
      }

      .hljs-string, .hljs-value, .hljs-inheritance, .hljs-header, .hljs-ruby .symbol, .hljs-xml .cdata {
        color: #9CDBA5 !important;
      }

      .hljs-css .hexcolor {
        color: #8abeb7;
      }

      .hljs-function, .hljs-python .decorator, .hljs-python .title, .hljs-ruby .function .title, .hljs-ruby .title .keyword,
      .hljs-perl .sub, .hljs-javascript .title, .hljs-coffeescript .title {
        color: #81a2be;
      }

      .hljs-keyword, .hljs-javascript .function {
        color: #7D8FB0;
        font-weight: normal !important;
      }

      .hljs-default .hljs {
        background: #101010;
        color: #c5c8c6;
        font-family: Menlo, Monaco, Consolas, monospace;
        line-height: 1.5;
        border: 1px solid #ccc;
        padding: 10px;
      }


      .hljs-default .hljs-tag,
      .hljs-default .xml .hljs-tag,
      .hljs-default .hljs-tag .hljs-title,
      .hljs-default .xml .hljs-tag .hljs-title {
        color: #66ADC7;
        font-weight: normal !important;
      }

      .hljs-default .hljs-title {
        color: #16BECC;
        font-weight: normal !important;
      }

      code, .remark-code {border: none !important}

      .hljs-default .javascript .xml {
        opacity: 1;
      }

      code .lolight,
      code .lolight * {
        color: #666 !important;
      }

      code .hilight,
      code .hilight * {
        color: #5DC744 !important;
      }
    </style>
  </head>
  <body>
    <script id="source" language="remarkjs"><!--

class: title-page, blue

<div>
<img src='images/react-logo.png' title='React logo' class='react-logo'>
</div>

# React 101

Benjie Gillam

BOTS.sh

<div class='bots-logo-container'>
<img src='images/bots-full-logo.png' title='BOTS logo' class='bots-logo'>
</div>


---

class: bots-is, cover

## BOTS: online web service automation IDE

### Rapidly develop, deploy and debug powerful web integrations.

---

class: middle

# Content

The bad old days

What is React and how does it fix these problems?

Why React?

view = fn(state)
for the same input (state, props) will always render EXACTLY the same.
NO GLOBALS!

one-way data flow

virtual DOM

everything is functional composition

NO DOM QUERYING!

Enforces good habits, no DOM read-write-read-write

components aren't necessarily DOM nodes
components are state and lifecycle

Isomorphic

move state up the tree

NO INHERITANCE! Use composition.

Separate container/presentational components

Keep as much pure as possible

What's this weird JSX syntax about anyway?

How does it fit together.

Component based.

Controlled components
(Demo in project with JSONTree of state?)

Lifecycle methods

HOT RELOADING


SO YOU'RE CONVERTED!
Where to next?

https://egghead.io/technologies/react


---

class: middle, center

# The Bad Old Days

### Expensive DOM manipulation

### Hard to reason about data flow

### Synchronisation issues: multiple sources of truth

### Turn it off/on again (reload the page)



---

class: middle, has-code

```js
// ----- Home View -----
var HomeView = Backbone.View.extend({
* template: _.template('<h1>Hello World!</h1>' +
*   '<p>Random number: <span><%- number %></span> (click for another)</p>' +
*   '<textarea>Notes...</textarea>'),

  events: {
    'click p': 'render'
  },

  randomNumber: function() {
    return Math.floor(Math.random() * 100) + 1;
  },

  render: function() {
*   this.$el.html(this.template({
*     number: this.randomNumber()
*   }));
  }
});
```


---

class: middle center

## Not so fast!

```js
  template: _.template('<h1>Hello World!</h1>' +
    '<p>Random number: <span><%- number %></span> (click for another)</p>' +
*   '<textarea>Notes...</textarea>'),
  ...
  render: function() {
*   this.$el.html(this.template({
      number: this.randomNumber()
    }));
  }
```

Calling `render()` overwrites everything, discarding
our `<textarea>` notes. We should only update the random number `<span>`:

---

class: middle, has-code

```js
// ----- Home View -----
var HomeView = Backbone.View.extend({
  template: _.template('<h1>Hello World!</h1>' +
    '<p>Random number: <span><%- number %></span> (click for another)</p>' +
    '<textarea>Notes...</textarea>'),

  events: {
*   'click p': 'newNumber'
  },

  randomNumber: function() {
    return Math.floor(Math.random() * 100) + 1;
  },

  newNumber: function(e) {
*   this.$("span").html(this.randomNumber());
  },

  render: function() {
    this.$el.html(this.template({
      number: this.randomNumber()
    }));
  }
});
```

---


class: middle, center

# Seems ok?

It might be until the designer wants a `<div>` instead of a `<p>`

---

class: cover, nightmare

---

class: middle, center

Fine, let's nip this in the bud and give it a special class `_button` so that the tag doesn't matter:


---

class: middle, has-code

```js
// ----- Home View -----
var HomeView = Backbone.View.extend({
  template: _.template('<h1>Hello World!</h1>' +
*   '<p class="_button">Random number:' +
*     '<span><%- number %></span> (click for another)' +
    '</p>' +
    '<textarea>Notes...</textarea>'),

  events: {
*   'click ._button': 'newNumber'
  },

  randomNumber: function() {
    return Math.floor(Math.random() * 100) + 1;
  },

  newNumber: function(e) {
*   this.$("._button span").html(this.randomNumber());
  },

  render: function() {
    this.$el.html(this.template({
      number: this.randomNumber()
    }));
  }
});
```

---

class: middle, center

# Great!

Let's just hope they don't change anything else, because each time they do the code breaks and the tests fail

---

class: middle, center

# Obvious issues

Breaks DRY - changes in one place (template) often require repeating elsewhere (jQuery)

Interactions between various dynamic components become hard to reason about

Unsure what's safe to modify and what isn't

So much code!

---


class: middle, center, cover, spaghetti




## ... In all it's brittle and a total nightmare to debug and test


---

class: middle, center, brown

# 2. What is React and how does it fix these problems?

---

class: middle, has-code


```js
// Remember this?

var HomeView = Backbone.View.extend({
  template: _.template('<h1>Hello World!</h1>' +
    '<p class="_button">Random number:' +
      '<span><%- number %></span> (click for another)' +
    '</p>' +
    '<textarea>Notes...</textarea>'),

  events: {
    'click ._button': 'newNumber'
  },

  randomNumber: function() {
    return Math.floor(Math.random() * 100) + 1;
  },

  newNumber: function(e) {
    this.$("._button span").html(this.randomNumber());
  },

  render: function() {
    this.$el.html(this.template({
      number: this.randomNumber()
    }));
  }
});
```

---

class: middle, has-code

Here it is again, but with React:

```jsx
const randomNumber = () => Math.floor(Math.random() * 100) + 1;

class HomeView extends React.Component {
* state = {randomNumber: randomNumber()};
* newNumber = () => this.setState({randomNumber: randomNumber()});
  render() {
    return (
      <div>
        <h1>Hello World!</h1>
*       <p onClick={this.newNumber}>
*         Random number: {this.state.randomNumber} (click for another)
        </p>
        <textarea>Notes...</textarea>
      </div>
    );
  }
}
```

---

class: middle, has-code

To be fair, I ought do it in ES5:

```jsx
const randomNumber = function() {return Math.floor(Math.random() * 100) + 1;}

const HomeView = React.createClass({
* getInitialState: function() {
*   return {randomNumber: randomNumber()};
* },
  newNumber: function() {
    this.setState({randomNumber: randomNumber()});
  },
  render: function() {
    return (
      <div>
        <h1>Hello World!</h1>
        <p onClick={this.newNumber`.bind(this)`}>
          Random number: {this.state.randomNumber} (click for another)
        </p>
        <textarea>Notes...</textarea>
      </div>
    );
  }
});
```



---

class: middle, center, blue

# Thank you!

### If you like playing with new tech that'll make you more productive; we're looking for alpha testers!
### [bots.sh](https://bots.sh)

--></script>
    <script src="remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        source: (document.getElementById("source").innerHTML).replace(/^<!--|-->$/g, ""),
        slideNumberFormat: function (current, total) { return null },
        ratio: '4:3',
        highlightLines: true,
        highlightSpans: true
      });
    </script>
  </body>
</html>
